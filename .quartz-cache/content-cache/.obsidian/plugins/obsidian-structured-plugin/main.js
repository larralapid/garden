/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => StructurePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/helpers/noteRenamer.ts
var NoteRenamer = class {
  constructor(app, finder) {
    this.app = app;
    this.finder = finder;
  }
  async renameNote(file, newName) {
    const newBasePath = file.basename.replace(file.basename, newName);
    const children = this.finder.findChildren(file);
    const newNotesNames = children.map((f) => {
      return {
        file: f,
        newPath: f.path.replace(file.basename, newBasePath)
      };
    });
    for (const f of newNotesNames) {
      await this.app.fileManager.renameFile(f.file, f.newPath);
    }
    await this.app.fileManager.renameFile(file, file.path.replace(file.basename, newBasePath));
  }
};

// src/helpers/noteFinder.ts
var getFullPathWithoutExtension = (path) => {
  const extention = path.split(".").pop();
  if (!extention) {
    return "";
  }
  const extLength = extention.length + 1;
  return path.slice(0, path.length - extLength);
};
var NoteFinder = class {
  constructor(app) {
    this.app = app;
  }
  findChildren(file) {
    const allNotes = this.findNotes();
    return allNotes.filter((n) => {
      return n.path.includes(file.path.slice(0, file.path.length - 3)) && n.parent == file.parent && n != file;
    });
  }
  findParents(file) {
    const allNotes = this.findNotes();
    return allNotes.filter((n) => {
      return getFullPathWithoutExtension(file.path).startsWith(getFullPathWithoutExtension(n.path)) && n.parent == file.parent && n != file;
    });
  }
  findNotes() {
    return this.app.vault.getMarkdownFiles();
  }
  getParentName(file) {
    const noteNamePath = file.basename.split(".");
    if (noteNamePath.length > 1) {
      noteNamePath.pop();
      return noteNamePath.join(".");
    }
    return null;
  }
};

// src/actions.ts
var import_obsidian4 = require("obsidian");

// src/modals/noteRenameModal.ts
var import_obsidian = require("obsidian");
var NoteRenameModal = class extends import_obsidian.Modal {
  constructor(app, file, noteRenamer) {
    super(app);
    this.file = file;
    this.noteRenamer = noteRenamer;
    this.open();
  }
  async rename() {
    const file = this.app.workspace.getActiveFile();
    if (file !== null) {
      await this.noteRenamer.renameNote(file, this.inputField.getValue());
    }
    this.close();
  }
  onOpen() {
    let { contentEl } = this;
    this.titleEl.setText(`Rename note: "${this.file.basename}"`);
    this.inputField = new import_obsidian.TextComponent(contentEl).setValue(this.file.basename);
    this.inputField.inputEl.addEventListener("keypress", async (keypressed) => {
      if (keypressed.key === "Enter") {
        await this.rename();
      }
    });
    this.inputField.inputEl.className = "prompt-input";
    this.modalEl.className = "prompt";
    this.inputField.inputEl.focus();
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};

// src/modals/noteFinderModal.ts
var import_obsidian2 = require("obsidian");
var NoteFinderModal = class extends import_obsidian2.FuzzySuggestModal {
  constructor(app, noteOpener, items) {
    super(app);
    this.noteOpener = noteOpener;
    this.items = items;
    this.open();
  }
  getItemText(item) {
    return item;
  }
  getItems() {
    return this.items.map((f) => f.basename);
  }
  onChooseItem(item, evt) {
    const note = this.items.find((f) => f.basename == item);
    if (note) {
      this.noteOpener.openNote(note).then();
    }
  }
  onClose() {
    super.onClose();
  }
};

// src/modals/noteCreateModal.ts
var import_obsidian3 = require("obsidian");
var NoteCreateModal = class extends import_obsidian3.SuggestModal {
  constructor(app, noteCreator, noteOpener, noteFinder, file) {
    super(app);
    this.noteCreator = noteCreator;
    this.noteOpener = noteOpener;
    this.noteFinder = noteFinder;
    this.file = file;
    this.emptyText = "Empty text (replace with nothing)";
    this.notes = this.noteFinder.findNotes().map((f) => f.basename);
    if (file) {
      this.inputEl.value = file.basename;
    }
    this.open();
  }
  getSuggestions(query) {
    let items = [];
    if (query !== "") {
      items.push(query);
    }
    items.push(...this.notes.filter((i) => i.toLocaleLowerCase().includes(query.toLocaleLowerCase()) && query !== i));
    return items;
  }
  selectSuggestion(value, evt) {
    if (!this.notes.find((n) => n == value)) {
      super.selectSuggestion(value, evt);
      return;
    }
    this.inputEl.value = value;
    this.inputEl.dispatchEvent(new Event("input"));
  }
  renderSuggestion(value, el) {
    el.innerText = value;
  }
  async onChooseSuggestion(item, _) {
    let filePath = item + ".md";
    if (this.file) {
      filePath = this.file.parent.path + "/" + filePath;
    }
    let file = await this.noteCreator.createWithTemplate(filePath, item);
    await this.noteOpener.openNote(file);
  }
};

// src/actions.ts
var Actions = class {
  constructor(app, settings, finder, noteRenamer, noteOpener, noteCreator) {
    this.app = app;
    this.settings = settings;
    this.finder = finder;
    this.noteRenamer = noteRenamer;
    this.noteOpener = noteOpener;
    this.noteCreator = noteCreator;
    this.onCreate = () => {
      const file = this.app.workspace.getActiveFile();
      new NoteCreateModal(this.app, this.noteCreator, this.noteOpener, this.finder, file);
    };
    this.onRename = () => {
      const file = this.app.workspace.getActiveFile();
      if (file !== null) {
        new NoteRenameModal(this.app, file, this.noteRenamer);
      }
    };
    this.onGetChild = () => {
      const file = this.app.workspace.getActiveFile();
      if (file !== null) {
        const children = this.finder.findChildren(file);
        new NoteFinderModal(this.app, this.noteOpener, children).open();
      }
    };
    this.onGetParent = () => {
      const file = this.app.workspace.getActiveFile();
      if (file !== null) {
        const parents = this.finder.findParents(file);
        new NoteFinderModal(this.app, this.noteOpener, parents).open();
      }
    };
    this.onOpenParent = async () => {
      const file = this.app.workspace.getActiveFile();
      if (file !== null) {
        const parentNoteName = this.finder.getParentName(file);
        if (parentNoteName !== null) {
          const parents = this.finder.findParents(file);
          const parentFile = parents.find((f) => f.basename == parentNoteName);
          if (parentFile) {
            await this.noteOpener.openNote(parentFile);
          } else {
            const newNote = await this.noteCreator.createParentNote(file, parentNoteName);
            if (newNote) {
              await this.noteOpener.openNote(newNote);
            }
          }
        } else {
          new import_obsidian4.Notice("Root node");
        }
      }
    };
  }
};

// src/settings/settingsTab.ts
var import_obsidian5 = require("obsidian");
var SettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Structured plugin settings" });
    new import_obsidian5.Setting(containerEl).setName("Open notes in split view").setDesc("If disabled: open in current tab").addToggle((v) => v.setValue(this.plugin.settings.openInSplit).onChange(async (value) => {
      this.plugin.settings.openInSplit = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Create parent").setDesc("Create parent if not exists").addToggle((v) => v.setValue(this.plugin.settings.createParent).onChange(async (value) => {
      this.plugin.settings.createParent = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Path to template").setDesc("Template for new note (navigating to parent). Available variables: {{NoteName}}").addText((v) => v.setValue(this.plugin.settings.templatePath).onChange(async (value) => {
      this.plugin.settings.templatePath = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/settings/defaults.ts
var DEFAULT_SETTINGS = {
  openInSplit: true,
  createParent: true,
  templatePath: ""
};

// src/helpers/noteOpener.ts
var NoteOpener = class {
  constructor(app, settings) {
    this.app = app;
    this.settings = settings;
    this.openNote = async (file) => {
      const leaf = this.app.workspace.getLeaf(this.settings.openInSplit);
      await leaf.openFile(file);
    };
  }
};

// src/helpers/noteCreator.ts
var import_obsidian6 = require("obsidian");
var NoteCreator = class {
  constructor(app, settings) {
    this.app = app;
    this.settings = settings;
    this.createWithTemplate = async (filePath, noteName) => {
      const newFile = this.app.vault.getAbstractFileByPath((0, import_obsidian6.normalizePath)(this.settings.templatePath));
      let content = "";
      if (this.settings.templatePath) {
        if (newFile && newFile instanceof import_obsidian6.TFile) {
          content = await this.app.vault.cachedRead(newFile);
          content = content.replace(new RegExp("{{NoteName}}", "g"), noteName);
        } else {
          content = "";
        }
      }
      let filePathNormalized = (0, import_obsidian6.normalizePath)(filePath);
      return this.app.vault.create(filePathNormalized, content);
    };
    this.createParentNote = async (currentFile, parentNoteName) => {
      if (this.settings.createParent) {
        new import_obsidian6.Notice("Parent does not exists. Create new one");
        const parentFilePath = (0, import_obsidian6.normalizePath)(currentFile.parent.path + "/" + parentNoteName + ".md");
        return this.createWithTemplate(parentFilePath, parentNoteName);
      } else {
        new import_obsidian6.Notice("Parent does not exists.");
        return null;
      }
    };
  }
};

// src/main.ts
var StructurePlugin = class extends import_obsidian7.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.addCommands = () => {
      const noteOpener = new NoteOpener(this.app, this.settings);
      const noteCreator = new NoteCreator(this.app, this.settings);
      const actions = new Actions(this.app, this.settings, this.finder, this.noteRenamer, noteOpener, noteCreator);
      this.addCommand({
        id: "renameNote",
        name: "Rename current note",
        callback: actions.onRename
      });
      this.addCommand({
        id: "createNote",
        name: "Create a note",
        callback: actions.onCreate
      });
      this.addCommand({
        id: "getChildrenNotes",
        name: "Get children notes",
        callback: actions.onGetChild
      });
      this.addCommand({
        id: "getParentNotes",
        name: "Get parents notes",
        callback: actions.onGetParent
      });
      this.addCommand({
        id: "openParentNotes",
        name: "Open parent note",
        callback: actions.onOpenParent
      });
    };
    this.finder = new NoteFinder(app);
    this.noteRenamer = new NoteRenamer(app, this.finder);
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new SettingTab(this.app, this));
    this.addCommands();
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.addCommands();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2hlbHBlcnMvbm90ZVJlbmFtZXIudHMiLCAic3JjL2hlbHBlcnMvbm90ZUZpbmRlci50cyIsICJzcmMvYWN0aW9ucy50cyIsICJzcmMvbW9kYWxzL25vdGVSZW5hbWVNb2RhbC50cyIsICJzcmMvbW9kYWxzL25vdGVGaW5kZXJNb2RhbC50cyIsICJzcmMvbW9kYWxzL25vdGVDcmVhdGVNb2RhbC50cyIsICJzcmMvc2V0dGluZ3Mvc2V0dGluZ3NUYWIudHMiLCAic3JjL3NldHRpbmdzL2RlZmF1bHRzLnRzIiwgInNyYy9oZWxwZXJzL25vdGVPcGVuZXIudHMiLCAic3JjL2hlbHBlcnMvbm90ZUNyZWF0b3IudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgUGx1Z2luLCBQbHVnaW5NYW5pZmVzdCB9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0IHsgTm90ZVJlbmFtZXIgfSBmcm9tICcuL2hlbHBlcnMvbm90ZVJlbmFtZXInXG5pbXBvcnQgeyBOb3RlRmluZGVyIH0gZnJvbSAnLi9oZWxwZXJzL25vdGVGaW5kZXInXG5pbXBvcnQgeyBBY3Rpb25zIH0gZnJvbSAnLi9hY3Rpb25zJ1xuaW1wb3J0IHsgU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzL3R5cGVzJ1xuaW1wb3J0IHsgU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3Mvc2V0dGluZ3NUYWInXG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9zZXR0aW5ncy9kZWZhdWx0cydcbmltcG9ydCB7IE5vdGVPcGVuZXIgfSBmcm9tICcuL2hlbHBlcnMvbm90ZU9wZW5lcidcbmltcG9ydCB7IE5vdGVDcmVhdG9yIH0gZnJvbSAnLi9oZWxwZXJzL25vdGVDcmVhdG9yJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJ1Y3R1cmVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBTZXR0aW5nc1xuICAgIG5vdGVSZW5hbWVyOiBOb3RlUmVuYW1lclxuICAgIGZpbmRlcjogTm90ZUZpbmRlclxuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCkge1xuICAgICAgICBzdXBlcihhcHAsIG1hbmlmZXN0KVxuXG4gICAgICAgIHRoaXMuZmluZGVyID0gbmV3IE5vdGVGaW5kZXIoYXBwKVxuICAgICAgICB0aGlzLm5vdGVSZW5hbWVyID0gbmV3IE5vdGVSZW5hbWVyKGFwcCwgdGhpcy5maW5kZXIpXG4gICAgfVxuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZHMoKVxuICAgIH1cblxuICAgIG9udW5sb2FkKCkge31cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICB7fSxcbiAgICAgICAgICAgIERFRkFVTFRfU0VUVElOR1MsXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWREYXRhKClcbiAgICAgICAgKVxuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKVxuICAgICAgICB0aGlzLmFkZENvbW1hbmRzKClcbiAgICB9XG5cbiAgICBhZGRDb21tYW5kcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgbm90ZU9wZW5lciA9IG5ldyBOb3RlT3BlbmVyKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKVxuICAgICAgICBjb25zdCBub3RlQ3JlYXRvciA9IG5ldyBOb3RlQ3JlYXRvcih0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncylcbiAgICAgICAgY29uc3QgYWN0aW9ucyA9IG5ldyBBY3Rpb25zKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLFxuICAgICAgICAgICAgdGhpcy5maW5kZXIsXG4gICAgICAgICAgICB0aGlzLm5vdGVSZW5hbWVyLFxuICAgICAgICAgICAgbm90ZU9wZW5lcixcbiAgICAgICAgICAgIG5vdGVDcmVhdG9yXG4gICAgICAgIClcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdyZW5hbWVOb3RlJyxcbiAgICAgICAgICAgIG5hbWU6ICdSZW5hbWUgY3VycmVudCBub3RlJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhY3Rpb25zLm9uUmVuYW1lLFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdjcmVhdGVOb3RlJyxcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUgYSBub3RlJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhY3Rpb25zLm9uQ3JlYXRlLFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdnZXRDaGlsZHJlbk5vdGVzJyxcbiAgICAgICAgICAgIG5hbWU6ICdHZXQgY2hpbGRyZW4gbm90ZXMnLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbnMub25HZXRDaGlsZCxcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnZ2V0UGFyZW50Tm90ZXMnLFxuICAgICAgICAgICAgbmFtZTogJ0dldCBwYXJlbnRzIG5vdGVzJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhY3Rpb25zLm9uR2V0UGFyZW50LFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcGVuUGFyZW50Tm90ZXMnLFxuICAgICAgICAgICAgbmFtZTogJ09wZW4gcGFyZW50IG5vdGUnLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbnMub25PcGVuUGFyZW50LFxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgIC8vICAgICBpZDogJ3JlbG9hZFBsdWdpbicsXG4gICAgICAgIC8vICAgICBuYW1lOiAnUmVsb2FkIFBsdWdpbiAoZGV2KScsXG4gICAgICAgIC8vICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyAgICAgICAgIC8vIEB0cy1pZ25vcmUgLSBmb3IgdGhpcy5hcHAucGx1Z2luc1xuICAgICAgICAvLyAgICAgICAgIGNvbnN0IGlkOiBzdHJpbmcgPSB0aGlzLm1hbmlmZXN0LmlkLCBwbHVnaW5zID0gdGhpcy5hcHAucGx1Z2luc1xuICAgICAgICAvLyAgICAgICAgIHBsdWdpbnMuZGlzYWJsZVBsdWdpbihpZCkudGhlbigoKSA9PiBwbHVnaW5zLmVuYWJsZVBsdWdpbihpZCkpXG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyB9KVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQgeyBOb3RlRmluZGVyIH0gZnJvbSAnLi9ub3RlRmluZGVyJ1xuXG5leHBvcnQgY2xhc3MgTm90ZVJlbmFtZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHAsIHByaXZhdGUgZmluZGVyOiBOb3RlRmluZGVyKSB7fVxuXG4gICAgYXN5bmMgcmVuYW1lTm90ZShmaWxlOiBURmlsZSwgbmV3TmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IG5ld0Jhc2VQYXRoID0gZmlsZS5iYXNlbmFtZS5yZXBsYWNlKGZpbGUuYmFzZW5hbWUsIG5ld05hbWUpXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5maW5kZXIuZmluZENoaWxkcmVuKGZpbGUpXG5cbiAgICAgICAgY29uc3QgbmV3Tm90ZXNOYW1lcyA9IGNoaWxkcmVuLm1hcCgoZikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWxlOiBmLFxuICAgICAgICAgICAgICAgIG5ld1BhdGg6IGYucGF0aC5yZXBsYWNlKGZpbGUuYmFzZW5hbWUsIG5ld0Jhc2VQYXRoKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBmb3IgKGNvbnN0IGYgb2YgbmV3Tm90ZXNOYW1lcykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmLmZpbGUsIGYubmV3UGF0aClcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKFxuICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgIGZpbGUucGF0aC5yZXBsYWNlKGZpbGUuYmFzZW5hbWUsIG5ld0Jhc2VQYXRoKVxuICAgICAgICApXG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbidcblxuY29uc3QgZ2V0RnVsbFBhdGhXaXRob3V0RXh0ZW5zaW9uID0gKHBhdGg6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgZXh0ZW50aW9uID0gcGF0aC5zcGxpdCgnLicpLnBvcCgpXG4gICAgaWYgKCFleHRlbnRpb24pe1xuICAgICAgICByZXR1cm4gXCJcIlxuICAgIH1cblxuICAgIGNvbnN0IGV4dExlbmd0aCA9IGV4dGVudGlvbi5sZW5ndGggKyAxXG4gICAgcmV0dXJuIHBhdGguc2xpY2UoMCwgcGF0aC5sZW5ndGggLSBleHRMZW5ndGgpXG59XG5cbmV4cG9ydCBjbGFzcyBOb3RlRmluZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcDogQXBwKSB7fVxuXG4gICAgZmluZENoaWxkcmVuKGZpbGU6IFRGaWxlKTogVEZpbGVbXSB7XG4gICAgICAgIGNvbnN0IGFsbE5vdGVzID0gdGhpcy5maW5kTm90ZXMoKVxuICAgICAgICByZXR1cm4gYWxsTm90ZXMuZmlsdGVyKChuKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIG4ucGF0aC5pbmNsdWRlcyhmaWxlLnBhdGguc2xpY2UoMCwgZmlsZS5wYXRoLmxlbmd0aCAtIDMpKSAmJlxuICAgICAgICAgICAgICAgIG4ucGFyZW50ID09IGZpbGUucGFyZW50ICYmXG4gICAgICAgICAgICAgICAgbiAhPSBmaWxlXG4gICAgICAgICAgICApXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZmluZFBhcmVudHMoZmlsZTogVEZpbGUpOiBURmlsZVtdIHtcbiAgICAgICAgY29uc3QgYWxsTm90ZXMgPSB0aGlzLmZpbmROb3RlcygpXG4gICAgICAgIHJldHVybiBhbGxOb3Rlcy5maWx0ZXIoKG4pID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgZ2V0RnVsbFBhdGhXaXRob3V0RXh0ZW5zaW9uKGZpbGUucGF0aCkuc3RhcnRzV2l0aChcbiAgICAgICAgICAgICAgICAgICAgZ2V0RnVsbFBhdGhXaXRob3V0RXh0ZW5zaW9uKG4ucGF0aClcbiAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgbi5wYXJlbnQgPT0gZmlsZS5wYXJlbnQgJiZcbiAgICAgICAgICAgICAgICBuICE9IGZpbGVcbiAgICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmaW5kTm90ZXMoKTogVEZpbGVbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICB9XG5cbiAgICBnZXRQYXJlbnROYW1lKGZpbGU6IFRGaWxlKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IG5vdGVOYW1lUGF0aCA9IGZpbGUuYmFzZW5hbWUuc3BsaXQoJy4nKVxuICAgICAgICBpZiAobm90ZU5hbWVQYXRoLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIG5vdGVOYW1lUGF0aC5wb3AoKVxuICAgICAgICAgICAgcmV0dXJuIG5vdGVOYW1lUGF0aC5qb2luKCcuJylcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgbm9ybWFsaXplUGF0aCwgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0IHsgTm90ZUZpbmRlciB9IGZyb20gJy4vaGVscGVycy9ub3RlRmluZGVyJ1xuaW1wb3J0IHsgTm90ZVJlbmFtZU1vZGFsIH0gZnJvbSAnLi9tb2RhbHMvbm90ZVJlbmFtZU1vZGFsJ1xuaW1wb3J0IHsgTm90ZUZpbmRlck1vZGFsIH0gZnJvbSAnLi9tb2RhbHMvbm90ZUZpbmRlck1vZGFsJ1xuaW1wb3J0IHsgTm90ZVJlbmFtZXIgfSBmcm9tICcuL2hlbHBlcnMvbm90ZVJlbmFtZXInXG5pbXBvcnQgeyBOb3RlT3BlbmVyIH0gZnJvbSAnLi9oZWxwZXJzL25vdGVPcGVuZXInXG5pbXBvcnQgeyBTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MvdHlwZXMnXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQgeyBOb3RlQ3JlYXRvciB9IGZyb20gJy4vaGVscGVycy9ub3RlQ3JlYXRvcidcbmltcG9ydCB7IE5vdGVDcmVhdGVNb2RhbCB9IGZyb20gJy4vbW9kYWxzL25vdGVDcmVhdGVNb2RhbCdcblxuZXhwb3J0IGNsYXNzIEFjdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGFwcDogQXBwLFxuICAgICAgICBwcml2YXRlIHNldHRpbmdzOiBTZXR0aW5ncyxcbiAgICAgICAgcHJpdmF0ZSBmaW5kZXI6IE5vdGVGaW5kZXIsXG4gICAgICAgIHByaXZhdGUgbm90ZVJlbmFtZXI6IE5vdGVSZW5hbWVyLFxuICAgICAgICBwcml2YXRlIG5vdGVPcGVuZXI6IE5vdGVPcGVuZXIsXG4gICAgICAgIHByaXZhdGUgbm90ZUNyZWF0b3I6IE5vdGVDcmVhdG9yXG4gICAgKSB7fVxuXG4gICAgb25DcmVhdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXG4gICAgICAgIG5ldyBOb3RlQ3JlYXRlTW9kYWwoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIHRoaXMubm90ZUNyZWF0b3IsXG4gICAgICAgICAgICB0aGlzLm5vdGVPcGVuZXIsXG4gICAgICAgICAgICB0aGlzLmZpbmRlcixcbiAgICAgICAgICAgIGZpbGVcbiAgICAgICAgKVxuICAgIH1cblxuICAgIG9uUmVuYW1lID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKVxuICAgICAgICBpZiAoZmlsZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3IE5vdGVSZW5hbWVNb2RhbCh0aGlzLmFwcCwgZmlsZSwgdGhpcy5ub3RlUmVuYW1lcilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uR2V0Q2hpbGQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXG4gICAgICAgIGlmIChmaWxlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZmluZGVyLmZpbmRDaGlsZHJlbihmaWxlKVxuICAgICAgICAgICAgbmV3IE5vdGVGaW5kZXJNb2RhbCh0aGlzLmFwcCwgdGhpcy5ub3RlT3BlbmVyLCBjaGlsZHJlbikub3BlbigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkdldFBhcmVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKClcbiAgICAgICAgaWYgKGZpbGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudHMgPSB0aGlzLmZpbmRlci5maW5kUGFyZW50cyhmaWxlKVxuICAgICAgICAgICAgbmV3IE5vdGVGaW5kZXJNb2RhbCh0aGlzLmFwcCwgdGhpcy5ub3RlT3BlbmVyLCBwYXJlbnRzKS5vcGVuKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uT3BlblBhcmVudCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKClcbiAgICAgICAgaWYgKGZpbGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudE5vdGVOYW1lID0gdGhpcy5maW5kZXIuZ2V0UGFyZW50TmFtZShmaWxlKVxuXG4gICAgICAgICAgICBpZiAocGFyZW50Tm90ZU5hbWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRzID0gdGhpcy5maW5kZXIuZmluZFBhcmVudHMoZmlsZSlcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRGaWxlID0gcGFyZW50cy5maW5kKFxuICAgICAgICAgICAgICAgICAgICAoZikgPT4gZi5iYXNlbmFtZSA9PSBwYXJlbnROb3RlTmFtZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50RmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm5vdGVPcGVuZXIub3Blbk5vdGUocGFyZW50RmlsZSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdOb3RlID0gYXdhaXQgdGhpcy5ub3RlQ3JlYXRvci5jcmVhdGVQYXJlbnROb3RlKFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE5vdGVOYW1lXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld05vdGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ub3RlT3BlbmVyLm9wZW5Ob3RlKG5ld05vdGUpXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnUm9vdCBub2RlJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBUZXh0Q29tcG9uZW50LCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0IHsgTm90ZVJlbmFtZXIgfSBmcm9tICcuLi9oZWxwZXJzL25vdGVSZW5hbWVyJ1xuXG5leHBvcnQgY2xhc3MgTm90ZVJlbmFtZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgaW5wdXRGaWVsZDogVGV4dENvbXBvbmVudFxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGFwcDogQXBwLFxuICAgICAgICBwcml2YXRlIGZpbGU6IFRGaWxlLFxuICAgICAgICBwcml2YXRlIG5vdGVSZW5hbWVyOiBOb3RlUmVuYW1lclxuICAgICkge1xuICAgICAgICBzdXBlcihhcHApXG4gICAgICAgIHRoaXMub3BlbigpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZW5hbWUoKSB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXG4gICAgICAgIGlmIChmaWxlICE9PSBudWxsKXtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubm90ZVJlbmFtZXIucmVuYW1lTm90ZShmaWxlLCB0aGlzLmlucHV0RmllbGQuZ2V0VmFsdWUoKSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpc1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChgUmVuYW1lIG5vdGU6IFwiJHt0aGlzLmZpbGUuYmFzZW5hbWV9XCJgKVxuICAgICAgICB0aGlzLmlucHV0RmllbGQgPSBuZXcgVGV4dENvbXBvbmVudChjb250ZW50RWwpLnNldFZhbHVlKFxuICAgICAgICAgICAgdGhpcy5maWxlLmJhc2VuYW1lXG4gICAgICAgIClcblxuICAgICAgICB0aGlzLmlucHV0RmllbGQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ2tleXByZXNzJyxcbiAgICAgICAgICAgIGFzeW5jIChrZXlwcmVzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGtleXByZXNzZWQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuYW1lKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIClcblxuICAgICAgICB0aGlzLmlucHV0RmllbGQuaW5wdXRFbC5jbGFzc05hbWUgPSAncHJvbXB0LWlucHV0J1xuICAgICAgICB0aGlzLm1vZGFsRWwuY2xhc3NOYW1lID0gJ3Byb21wdCdcblxuICAgICAgICB0aGlzLmlucHV0RmllbGQuaW5wdXRFbC5mb2N1cygpXG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgbGV0IHsgY29udGVudEVsIH0gPSB0aGlzXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpXG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQgeyBOb3RlT3BlbmVyIH0gZnJvbSAnLi4vaGVscGVycy9ub3RlT3BlbmVyJ1xuXG5leHBvcnQgY2xhc3MgTm90ZUZpbmRlck1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8c3RyaW5nPiB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxuICAgICAgICBhcHA6IEFwcCxcbiAgICAgICAgcHJpdmF0ZSBub3RlT3BlbmVyOiBOb3RlT3BlbmVyLFxuICAgICAgICBwcml2YXRlIGl0ZW1zOiBURmlsZVtdXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcClcbiAgICAgICAgdGhpcy5vcGVuKClcbiAgICB9XG5cbiAgICBnZXRJdGVtVGV4dChpdGVtOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gaXRlbVxuICAgIH1cblxuICAgIGdldEl0ZW1zKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubWFwKChmKSA9PiBmLmJhc2VuYW1lKVxuICAgIH1cblxuICAgIG9uQ2hvb3NlSXRlbShpdGVtOiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgbm90ZSA9IHRoaXMuaXRlbXMuZmluZCgoZikgPT4gZi5iYXNlbmFtZSA9PSBpdGVtKVxuICAgICAgICBpZiAobm90ZSl7XG4gICAgICAgICAgICB0aGlzLm5vdGVPcGVuZXIub3Blbk5vdGUobm90ZSkudGhlbigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBzdXBlci5vbkNsb3NlKClcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFN1Z2dlc3RNb2RhbCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCB7IE5vdGVDcmVhdG9yIH0gZnJvbSAnLi4vaGVscGVycy9ub3RlQ3JlYXRvcidcbmltcG9ydCB7IE5vdGVPcGVuZXIgfSBmcm9tICcuLi9oZWxwZXJzL25vdGVPcGVuZXInXG5pbXBvcnQgeyBOb3RlRmluZGVyIH0gZnJvbSAnLi4vaGVscGVycy9ub3RlRmluZGVyJ1xuXG5leHBvcnQgY2xhc3MgTm90ZUNyZWF0ZU1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xuICAgIGVtcHR5VGV4dCA9ICdFbXB0eSB0ZXh0IChyZXBsYWNlIHdpdGggbm90aGluZyknXG4gICAgcHJpdmF0ZSBub3Rlczogc3RyaW5nW11cblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhcHA6IEFwcCxcbiAgICAgICAgcHJpdmF0ZSBub3RlQ3JlYXRvcjogTm90ZUNyZWF0b3IsXG4gICAgICAgIHByaXZhdGUgbm90ZU9wZW5lcjogTm90ZU9wZW5lcixcbiAgICAgICAgcHJpdmF0ZSBub3RlRmluZGVyOiBOb3RlRmluZGVyLFxuICAgICAgICBwcml2YXRlIGZpbGU6IFRGaWxlIHwgbnVsbFxuICAgICkge1xuICAgICAgICBzdXBlcihhcHApXG4gICAgICAgIHRoaXMubm90ZXMgPSB0aGlzLm5vdGVGaW5kZXIuZmluZE5vdGVzKCkubWFwKChmKSA9PiBmLmJhc2VuYW1lKVxuICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gZmlsZS5iYXNlbmFtZVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vcGVuKClcbiAgICB9XG5cbiAgICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgICAgICBsZXQgaXRlbXMgPSBbXVxuXG4gICAgICAgIGlmIChxdWVyeSAhPT0gJycpe1xuICAgICAgICAgICAgaXRlbXMucHVzaChxdWVyeSlcbiAgICAgICAgfVxuICAgICAgICBpdGVtcy5wdXNoKFxuICAgICAgICAgICAgLi4udGhpcy5ub3Rlcy5maWx0ZXIoKGkpID0+XG4gICAgICAgICAgICAgICAgaS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG9jYWxlTG93ZXJDYXNlKCkpICYmIHF1ZXJ5ICE9PSBpXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIGl0ZW1zXG4gICAgfVxuXG4gICAgc2VsZWN0U3VnZ2VzdGlvbih2YWx1ZTogc3RyaW5nLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIC8vIE5vdGUgZG9lcyBub3QgZXhpc3QgcHJvY2VlZCB0byBvbkNob29zZVN1Z2dlc3Rpb25cbiAgICAgICAgaWYgKCF0aGlzLm5vdGVzLmZpbmQoKG4pID0+IG4gPT0gdmFsdWUpKSB7XG4gICAgICAgICAgICBzdXBlci5zZWxlY3RTdWdnZXN0aW9uKHZhbHVlLCBldnQpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IHZhbHVlXG4gICAgICAgIHRoaXMuaW5wdXRFbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgfVxuXG4gICAgcmVuZGVyU3VnZ2VzdGlvbih2YWx1ZTogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgZWwuaW5uZXJUZXh0ID0gdmFsdWVcbiAgICB9XG5cbiAgICBhc3luYyBvbkNob29zZVN1Z2dlc3Rpb24oXG4gICAgICAgIGl0ZW06IHN0cmluZyxcbiAgICAgICAgXzogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnRcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgbGV0IGZpbGVQYXRoID0gaXRlbSArICcubWQnXG5cbiAgICAgICAgaWYgKHRoaXMuZmlsZSkge1xuICAgICAgICAgICAgZmlsZVBhdGggPSB0aGlzLmZpbGUucGFyZW50LnBhdGggKyAnLycgKyBmaWxlUGF0aFxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZpbGUgPSBhd2FpdCB0aGlzLm5vdGVDcmVhdG9yLmNyZWF0ZVdpdGhUZW1wbGF0ZShmaWxlUGF0aCwgaXRlbSlcbiAgICAgICAgYXdhaXQgdGhpcy5ub3RlT3BlbmVyLm9wZW5Ob3RlKGZpbGUpXG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0IFN0cnVjdHVyZVBsdWdpbiBmcm9tICcuLi9tYWluJ1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogU3RydWN0dXJlUGx1Z2luXG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdHJ1Y3R1cmVQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgbGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXNcblxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpXG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnU3RydWN0dXJlZCBwbHVnaW4gc2V0dGluZ3MnIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnT3BlbiBub3RlcyBpbiBzcGxpdCB2aWV3JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdJZiBkaXNhYmxlZDogb3BlbiBpbiBjdXJyZW50IHRhYicpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh2KSA9PlxuICAgICAgICAgICAgICAgIHZcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5JblNwbGl0KVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuSW5TcGxpdCA9IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NyZWF0ZSBwYXJlbnQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0NyZWF0ZSBwYXJlbnQgaWYgbm90IGV4aXN0cycpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh2KSA9PlxuICAgICAgICAgICAgICAgIHZcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNyZWF0ZVBhcmVudClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3JlYXRlUGFyZW50ID0gdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnUGF0aCB0byB0ZW1wbGF0ZScpXG4gICAgICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgICAgICAnVGVtcGxhdGUgZm9yIG5ldyBub3RlIChuYXZpZ2F0aW5nIHRvIHBhcmVudCkuIEF2YWlsYWJsZSB2YXJpYWJsZXM6IHt7Tm90ZU5hbWV9fSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRUZXh0KCh2KSA9PlxuICAgICAgICAgICAgICAgIHZcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBsYXRlUGF0aClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGxhdGVQYXRoID0gdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgfVxufVxuIiwgImltcG9ydCB7IFNldHRpbmdzIH0gZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFNldHRpbmdzID0ge1xuICAgIG9wZW5JblNwbGl0OiB0cnVlLFxuICAgIGNyZWF0ZVBhcmVudDogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVBhdGg6ICcnLFxufVxuIiwgImltcG9ydCB7IEFwcCwgTWFya2Rvd25WaWV3LCBTcGxpdERpcmVjdGlvbiwgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCB7IFNldHRpbmdzIH0gZnJvbSAnLi4vc2V0dGluZ3MvdHlwZXMnXG5cbmV4cG9ydCBjbGFzcyBOb3RlT3BlbmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcDogQXBwLCBwcml2YXRlIHNldHRpbmdzOiBTZXR0aW5ncykge31cblxuICAgIG9wZW5Ob3RlID0gYXN5bmMgKGZpbGU6IFRGaWxlKSA9PiB7XG4gICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0aGlzLnNldHRpbmdzLm9wZW5JblNwbGl0KVxuICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpXG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgbm9ybWFsaXplUGF0aCwgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0IHsgU2V0dGluZ3MgfSBmcm9tICcuLi9zZXR0aW5ncy90eXBlcydcblxuZXhwb3J0IGNsYXNzIE5vdGVDcmVhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcDogQXBwLCBwcml2YXRlIHNldHRpbmdzOiBTZXR0aW5ncykge31cblxuICAgIGNyZWF0ZVdpdGhUZW1wbGF0ZSA9IGFzeW5jIChcbiAgICAgICAgZmlsZVBhdGg6IHN0cmluZyxcbiAgICAgICAgbm90ZU5hbWU6IHN0cmluZ1xuICAgICk6IFByb21pc2U8VEZpbGU+ID0+IHtcbiAgICAgICAgY29uc3QgbmV3RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcbiAgICAgICAgICAgIG5vcm1hbGl6ZVBhdGgodGhpcy5zZXR0aW5ncy50ZW1wbGF0ZVBhdGgpXG4gICAgICAgIClcblxuICAgICAgICBsZXQgY29udGVudCA9ICcnXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnRlbXBsYXRlUGF0aCkge1xuICAgICAgICAgICAgaWYgKG5ld0ZpbGUgJiYgbmV3RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQobmV3RmlsZSlcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICBuZXcgUmVnRXhwKCd7e05vdGVOYW1lfX0nLCAnZycpLFxuICAgICAgICAgICAgICAgICAgICBub3RlTmFtZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9ICcnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZmlsZVBhdGhOb3JtYWxpemVkID0gbm9ybWFsaXplUGF0aChmaWxlUGF0aClcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aE5vcm1hbGl6ZWQsIGNvbnRlbnQpXG4gICAgfVxuXG4gICAgY3JlYXRlUGFyZW50Tm90ZSA9IGFzeW5jIChcbiAgICAgICAgY3VycmVudEZpbGU6IFRGaWxlLFxuICAgICAgICBwYXJlbnROb3RlTmFtZTogc3RyaW5nXG4gICAgKTogUHJvbWlzZTxURmlsZSB8IG51bGw+ID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuY3JlYXRlUGFyZW50KSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdQYXJlbnQgZG9lcyBub3QgZXhpc3RzLiBDcmVhdGUgbmV3IG9uZScpXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRGaWxlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgICAgICAgY3VycmVudEZpbGUucGFyZW50LnBhdGggKyAnLycgKyBwYXJlbnROb3RlTmFtZSArICcubWQnXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVXaXRoVGVtcGxhdGUocGFyZW50RmlsZVBhdGgsIHBhcmVudE5vdGVOYW1lKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnUGFyZW50IGRvZXMgbm90IGV4aXN0cy4nKVxuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFBNEM7OztBQ0dyQyxJQUFNLGNBQU4sTUFBa0I7QUFBQSxFQUNyQixZQUFvQixLQUFrQixRQUFvQjtBQUF0QztBQUFrQjtBQUFBLEVBQXFCO0FBQUEsRUFFM0QsTUFBTSxXQUFXLE1BQWEsU0FBaUI7QUFDM0MsVUFBTSxjQUFjLEtBQUssU0FBUyxRQUFRLEtBQUssVUFBVSxPQUFPO0FBQ2hFLFVBQU0sV0FBVyxLQUFLLE9BQU8sYUFBYSxJQUFJO0FBRTlDLFVBQU0sZ0JBQWdCLFNBQVMsSUFBSSxDQUFDLE1BQU07QUFDdEMsYUFBTztBQUFBLFFBQ0gsTUFBTTtBQUFBLFFBQ04sU0FBUyxFQUFFLEtBQUssUUFBUSxLQUFLLFVBQVUsV0FBVztBQUFBLE1BQ3REO0FBQUEsSUFDSixDQUFDO0FBRUQsZUFBVyxLQUFLLGVBQWU7QUFDM0IsWUFBTSxLQUFLLElBQUksWUFBWSxXQUFXLEVBQUUsTUFBTSxFQUFFLE9BQU87QUFBQSxJQUMzRDtBQUNBLFVBQU0sS0FBSyxJQUFJLFlBQVksV0FDdkIsTUFDQSxLQUFLLEtBQUssUUFBUSxLQUFLLFVBQVUsV0FBVyxDQUNoRDtBQUFBLEVBQ0o7QUFDSjs7O0FDdkJBLElBQU0sOEJBQThCLENBQUMsU0FBeUI7QUFDMUQsUUFBTSxZ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
